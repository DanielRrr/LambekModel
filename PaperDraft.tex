\documentclass[a4paper]{article}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{bussproofs}
\usepackage{mathtools}
\usepackage{verbatim}
\usepackage{dsfont}
\usepackage{mathabx}
\usepackage[all, 2cell]{xy}
\usepackage[all]{xy}
\usepackage{wasysym}
\usepackage{rotating}
\usepackage{geometry}
\usepackage{trfsigns}
\usepackage{cmll}
\usepackage{authblk}

\theoremstyle{defin}
\newtheorem{defin}{Definition}

\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}

\theoremstyle{prop}
\newtheorem{prop}{Proposition}

\theoremstyle{lemma}
\newtheorem{lemma}{Lemma}

\theoremstyle{ex}
\newtheorem{ex}{Example}

\theoremstyle{col}
\newtheorem{col}{Corollary}
\usepackage{listings} 		% for source code
\date{}
\author[1,2]{Daniel Rogozin}
\affil[1]{Lomonosov Moscow State University}
\affil[2]{Serokell O\"{U}}
\title{Models of Lambek calculus enriched with subexponentials}

\begin{document}

\maketitle

\begin{abstract}
\end{abstract}

\section{The Lambek Calculus with subexponentials}

\begin{defin} A subexponential signature is an ordered quintuple:

  $\Sigma = \langle \mathcal{I}, \preceq, \mathcal{W}, \mathcal{C}, \mathcal{E} \rangle$,
\end{defin}

where $I = \{ s_1, \dots, s_n\}$, $\mathcal{I}, \preceq \rangle$ is a preorder.
$W, C, E$ are upwardly closed subsets of $I$ and $\mathcal{W} \cap \mathcal{C} \subseteq \mathcal{E}$.


\begin{defin}
$ $

  $\mathcal{F}_{\Sigma} ::= Tp \: | \: (\mathcal{F}_{\Sigma} / \mathcal{F}_{\Sigma}) \: | \: (\mathcal{F}_{\Sigma} \backslash \mathcal{F}_{\Sigma}) \: | \: (\mathcal{F}_{\Sigma} \bullet \mathcal{F}_{\Sigma}) \: | \: (\mathcal{F}_{\Sigma} \lor \mathcal{F}_{\Sigma}) \: | (\mathcal{F}_{\Sigma} \land \mathcal{F}_{\Sigma}) \: | {!_s \mathcal{F}_{\Sigma}}_{s \in \mathcal{I}} $
\end{defin}

\begin{defin} Noncommutative linear logic with subexponentials ($SMALC_{\Sigma}$), where $\Sigma$ is a subexponential signature.

\begin{prooftree}
\AxiomC{$ $}
\RightLabel{\scriptsize{ax}}
\UnaryInfC{$A \rightarrow A$}
\end{prooftree}

\begin{minipage}{0.5\textwidth}
  \begin{flushleft}
    \begin{prooftree}
      \AxiomC{$\Gamma \rightarrow A$}
      \AxiomC{$\Delta, B, \Theta \rightarrow C$}
      \RightLabel{$\backslash \rightarrow$}
      \BinaryInfC{$\Delta, \Gamma, A \backslash B, \Theta \rightarrow C$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \rightarrow A$}
      \AxiomC{$\Delta, B, \Theta \rightarrow C$}
      \RightLabel{$/ \rightarrow$}
      \BinaryInfC{$\Delta, B / A, \Gamma, \Theta \rightarrow C$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma, A, B, \Delta \rightarrow C$}
      \RightLabel{$\bullet \rightarrow$}
      \UnaryInfC{$\Gamma, A \bullet B, \Delta \rightarrow C$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma, A_i, \Delta \rightarrow B$}
      \RightLabel{$\&, i = 1,2 \rightarrow$}
      \UnaryInfC{$\Gamma, A_1 \& A_2, \Delta \rightarrow B$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma, A, \Delta \rightarrow C$}
      \AxiomC{$\Gamma, B, \Delta \rightarrow C$}
      \RightLabel{$\vee \rightarrow$}
      \BinaryInfC{$\Gamma, A \vee B, \Delta \rightarrow C$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma, \Delta \rightarrow A$}
      \RightLabel{${\bf 1} \rightarrow$}
      \UnaryInfC{$\Gamma, {\bf 1}, \Delta \rightarrow A$}
    \end{prooftree}

    \begin{prooftree}
    \AxiomC{$\Gamma, A, \Delta \rightarrow C$}
    \RightLabel{$! \rightarrow$}
    \UnaryInfC{$\Gamma, !^{s} A, \Delta \rightarrow C$}
    \end{prooftree}
  \end{flushleft}
\end{minipage}
\begin{minipage}{0.5\textwidth}
  \begin{flushright}
    \begin{prooftree}
      \AxiomC{$A, \Pi \rightarrow B$}
      \RightLabel{$\rightarrow \backslash$}
      \UnaryInfC{$\Pi \rightarrow A \backslash B$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Pi, A \rightarrow B$}
      \RightLabel{$\rightarrow /$}
      \UnaryInfC{$\Pi \rightarrow B / A$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \rightarrow A$}
      \AxiomC{$\Delta \rightarrow B$}
      \RightLabel{$\rightarrow \bullet$}
      \BinaryInfC{$\Gamma, \Delta \rightarrow A \bullet B$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \rightarrow A$}
      \AxiomC{$\Gamma \rightarrow B$}
      \RightLabel{$\rightarrow \&$}
      \BinaryInfC{$\Gamma \rightarrow A \& B$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma \rightarrow A_i$}
      \RightLabel{$\rightarrow \vee, i = 1,2$}
      \UnaryInfC{$\Gamma \rightarrow A_1 \vee A_2$}
    \end{prooftree}

    \begin{prooftree}
      \AxiomC{$ $}
      \RightLabel{$\rightarrow {\bf 1}$}
      \UnaryInfC{$\rightarrow {\bf 1}$}
    \end{prooftree}

    \begin{prooftree}
    \AxiomC{$!^{s_1} A_1, \dots, !^{s_n} A_n \rightarrow A$}
    \RightLabel{$\rightarrow !, \forall j, s_j \succeq s$}
    \UnaryInfC{$!^{s_1} A_1, \dots, !^{s_n} A_n \rightarrow !^{s} A$}
    \end{prooftree}
  \end{flushright}
\end{minipage}
Structural rules:

\begin{minipage}{0.5\textwidth}
  \begin{flushleft}
        \begin{prooftree}
        \AxiomC{$\Gamma, !^{s} A, \Delta, !^{s} A, \Theta \rightarrow B$}
        \RightLabel{${\bf ncontr}_1, s \in C$}
        \UnaryInfC{$\Gamma, !^{s} A, \Delta, \Theta \rightarrow B$}
        \end{prooftree}

        \begin{prooftree}
        \AxiomC{$\Gamma, \Delta, !^{s} A, \Theta \rightarrow B$}
        \RightLabel{${\bf ex}_1, s \in E$}
        \UnaryInfC{$\Gamma, !^{s} A, \Delta, \Theta \rightarrow A$}
        \end{prooftree}

    \begin{prooftree}
      \AxiomC{$\Gamma, \Delta \rightarrow B$}
      \RightLabel{${\bf weak}_!, s \in C$}
      \UnaryInfC{$\Gamma, !^{s} A, \Delta \rightarrow B$}
    \end{prooftree}

  \end{flushleft}
\end{minipage}
\begin{minipage}{0.5\textwidth}
  \begin{flushright}

      \begin{prooftree}
        \AxiomC{$\Gamma, !^{s} A, \Delta, !^{s} A, \Theta \rightarrow B$}
        \RightLabel{${\bf ncontr}_2, s \in C$}
        \UnaryInfC{$\Gamma, \Delta, !^{s} A, \Theta \rightarrow B$}
      \end{prooftree}

      \begin{prooftree}
        \AxiomC{$\Gamma, !^{s} A, \Delta, \Theta \rightarrow B$}
        \RightLabel{${\bf ex}_2, s \in E$}
        \UnaryInfC{$\Gamma, \Delta, !^{s} A, \Theta \rightarrow A$}
      \end{prooftree}

  \begin{prooftree}
    \AxiomC{$\Gamma \rightarrow A$}
    \AxiomC{$\Pi, A, \Delta \rightarrow B$}
    \RightLabel{${\bf cut}$}
    \BinaryInfC{$\Gamma, \Pi, \Delta \rightarrow B$}
  \end{prooftree}
  \end{flushright}
\end{minipage}
\end{defin}

\begin{defin}
  By ${L^{*}_{\bf 1} \land \lor}_{\bf S4}$ we mean $SMALC_{\Sigma}$, where $\Sigma = \{ s \}$ and $C = W = E = \emptyset$.
\end{defin}


\begin{theorem}
$ $

  \begin{enumerate}
    \item Cut-rule is admissable;
    \item $\text{SMALC}_{\Sigma}$ is undecidable, if $C \neq \emptyset$;
    \item If $C$ is empty, then the decidability problem of $\text{SMALC}_{\Sigma}$ belongs to PSPACE.
  \end{enumerate}
\end{theorem}

\section{Semantics}

\begin{defin} Quantale
$ $

  A quantale is a triple $\mathcal{Q} = \langle A, \bigvee, \cdot \rangle$, such that $\langle A, \bigvee \rangle$
is a complete lattice and $\langle A, \cdot \rangle$ is a semigroup, such that for all indexing set $I$:

\begin{enumerate}
  \item $a \cdot \bigvee \limits_{i \in I} b_i = \bigvee \limits_{i \in I} (a \cdot b_i)$;
  \item $\bigvee \limits_{i \in I} a_i \cdot b = \bigvee \limits_{i \in I} (a_i \cdot b)$
\end{enumerate}

A quanlate is called unital, if $\langle A, \cdot \rangle$ is a monoid.
\end{defin}

Some example of quantales:

\begin{itemize}
\item Let $A$ be a semigroup (monoid), then $\langle \mathcal{P}(A), \cdot, \subseteq \rangle$
is a free (unital) quantale.
\item Let $R$ be a ring and $Sub(R)$ be a set of additive subgroups of $R$.
We define $A \cdot B$ as an additive subgroup generated by finite sums of products $ab$ and order is defined by inclusion.
\item Any locale is a quantale with $\cdot = \wedge$.
\end{itemize}

It is easy to see, that any (unital) quantale is a residual (monoid) semigroup. We define divisions as follows:

\begin{enumerate}
\item $a \backslash b = \bigvee \{ c \: | \: a \cdot c \leq b \}$
\item $b / a = \bigvee \{ c \: | \: c \cdot a \leq b \}$
\end{enumerate}

\begin{defin}

  Let $\mathcal{Q}_1$, $\mathcal{Q}_2$ be quantales. A quantale homomorphism is a map $f : \mathcal{Q}_1 \to \mathcal{Q}_2$, such that:

  \begin{enumerate}
    \item for all $a,b \in \mathcal{Q}_1$, $f(a \cdot b) = f(a) \cdot f(b)$;
    \item for all indexing set $I$, $f(\bigvee \limits_{i \in I} a_i) = \bigvee \limits_{i \in I} f(a_i)$.
  \end{enumerate}

  If $\mathcal{Q}_1$, $\mathcal{Q}_2$ are unital quantales, then a unital homomorphism if a quantale homomorphism, such that $f(\varepsilon) = \varepsilon$.
\end{defin}

\begin{defin}
$ $

  Let $\mathcal{Q} = \langle A, \bigvee, \cdot \rangle$ be a quantale. $\mathcal{S} \subseteq \mathcal{Q}$ is said to be a subquantale, if
  $\mathcal{S}$ is closed under multiplication and sups.
\end{defin}

There occurs the following simple statement:

\begin{prop}
  $ $

Let $\mathcal{Q}_1$, $\mathcal{Q}_2$ be quantales and $\mathcal{S} \subseteq \mathcal{Q}_1$ is a subquantale of $\mathcal{Q}_2$.

Then, if $f : \mathcal{Q}_1 \to \mathcal{Q}_2$ is a quantale homomorphism, then $f(\mathcal{S}) \subseteq \mathcal{Q}_2$ is a subquantale of $\mathcal{Q}_2$.

In other words, a homomorphic image of subquantale is a subquantale.
\end{prop}

\begin{proof}
  It is clearly that $f(\mathcal{S}) \subseteq \mathcal{Q}_2$ is a submonoid of $\mathcal{Q}_2$.

  Let $a_i \in S$ for each $i \in I$, so $\bigvee \limits_{i \in I} a_i \in S$, but $f(a_i) \in f(\mathcal{S})$ for any $i \in I$,
  so $f(\bigvee \limits_{i \in I} a_i) = \bigvee \limits_{i \in I} (f (a)) \in f(\mathcal{S})$, so $f(\mathcal{S})$ is closed under joins, so $f(\mathcal{S})$ is a subquantale of $\mathcal{Q}_2$
\end{proof}

\begin{defin}
$ $

  Let $\mathcal{Q} = \langle A, \bigvee, \cdot \rangle$ be a quantale.
  The center of a quantale is the subquantale $\mathcal{Z}(\mathcal{Q}) = \{ a \in A \: | \: \forall b \in A, a \cdot b = b \cdot a \}$
\end{defin}

\begin{defin}
$ $

  An open modality (or quantic conucleus) on quantale $\mathcal{Q}$ is a map $\Box : \mathcal{Q} \to \mathcal{Q}$, such that

\begin{enumerate}
  \item $\Box x \leq x$;
  \item $\Box x = \Box \Box x$;
  \item $x \leq y \Rightarrow \Box x \leq \Box y$;
  \item $\Box x \cdot \Box y = \Box (\Box x \cdot \Box y)$.
\end{enumerate}

For unital quantale, we require that $\Box e = e$.
\end{defin}

Note that, we may replace the last condition on equivalent condition $\Box (x) \cdot \Box (y) \leq \Box (x \cdot y)$.

\begin{defin}
$ $

  We define a partial order on open modalities on $\mathcal{Q}$ as $\Box_1 \leq \Box_2 \Leftrightarrow \forall a \in Q, \Box_1 (a) \leq \Box_2 (a)$.
\end{defin}

\begin{lemma}
  $\Box_1 a_1 \cdot \Box_2 a_2 \leq \Box^{'} (\Box_1 a_1 \cdot \Box_2 a_2)$, where $\Box_i \leq \Box, i = 1,2$.
\end{lemma}

\begin{proof}
$ $

  $\begin{array}{lll}
  &\Box_1 a_1 \cdot \Box_2 a_2 \leq & \\
  &\Box_1 (\Box_1 a_1) \cdot \Box_2 (\Box_2 a_2) \leq & \\
  &\Box (\Box_1 a_1) \cdot \Box (\Box_2 a_2) \leq & \\
  &\Box (\Box_1 (a_1) \cdot \Box_2 (a_2))&
  \end{array}$
\end{proof}

\begin{defin}
$ $
\begin{enumerate}
  \item An open modality is called central, if for all
  $a, b \in \mathcal{Q}, \Box(a) \cdot b = b \cdot \Box(a)$.

  \item An open modality is called weak square-increasing,
  if for all $a, b \in \mathcal{Q}, \Box a \cdot b \leq \Box a \cdot b \cdot \Box a$ and
  $b \cdot \Box a \leq \Box a \cdot b \cdot \Box a$.

  \item An open modality is called unital, if $\forall a \in Q, \Box a \leq e$.
\end{enumerate}
\end{defin}

\begin{lemma}
$ $

  Let $\Box$ be an open modality on some unital quantale $\mathcal{Q} = \langle A, \bigvee, \cdot, e \rangle$.
  Then, if $\Box$ is unital and weak idempotent, then $\Box$ is central.
\end{lemma}

\begin{proof}
$ $

  $\begin{array}{lll}
  & b \cdot \Box a \leq & \\
  & \:\:\:\: \text{Right weak square-increase}& \\
  &\Box a \cdot b \cdot \Box a \leq & \\
  & \:\:\:\: \text{Unitality}& \\
  & \Box a \cdot b \cdot e \leq & \\
  & \:\:\:\: \text{Identity}& \\
  &\Box a \cdot b \leq & \\
  & \:\:\:\: \text{Left weak square-increase}& \\
  &\Box a \cdot b \cdot \Box a \leq & \\
  & \:\:\:\: \text{Unitality}& \\
  &e \cdot b \cdot \Box a \leq & \\
  & \:\:\:\: \text{Identity}& \\
  &b \cdot \Box(a)&
  \end{array}$

Hence, $b \cdot \Box a = \Box a \cdot b$, so for all $a \in \mathcal Q, \Box a \in \mathcal{Z}(\mathcal{Q})$.

\end{proof}

\begin{prop}
$ $

  Let $\mathcal{Q}$ be a quantale and $S \subseteq \mathcal{Q}$ a subquantale,
  then $\Box : \mathcal{Q} \to \mathcal{Q}$, such that $\Box(a) = \bigvee \{ s \in S \: | \: s \leq a \}$, is an open modality.
\end{prop}

\begin{proof}
  See
\end{proof}

\begin{prop}
$ $

  Let $\mathcal{Q}$ be a quantale and $\mathcal{S}_1 \subseteq \mathcal{S}_2 \subseteq \mathcal{Q}$.

  Then $\Box_{\mathcal{S}_1} (a) \leq \Box_{\mathcal{S}_1} (a)$.
\end{prop}

\begin{proof}

Immediatly.
\end{proof}

\begin{prop}
$ $

Let $\mathcal{Q}$ be a quantale and $\mathcal{S} \subseteq \mathcal{Q}$ a subquantale, then the following operations are open modalities:

\begin{enumerate}
  \item $\Box_z (a) = \bigvee \{ s \in S \: | s \leq a, s \in \mathcal{Z}(\mathcal{Q}) \}$;
  \item $\Box_{\mathds{1}} (a) = \bigvee \{ s \in S \: | s \leq a, s \leq \mathds{1} \}$;
  \item $\Box_{idem} (a) = \bigvee \{ s \in S \: | s \leq a, \forall b \in Q, b \cdot s \vee s \cdot b \leq s \cdot b \cdot s\}$;
  \item $\Box_{z, \mathds{1}}, I_{z, idem}, I_{\mathds{1}, idem}, I_{z, \mathds{1}, idem}$.
\end{enumerate}
\end{prop}

\begin{proof}
  Immediatly.
\end{proof}

\begin{prop}
$ $

\begin{enumerate}
  \item $\forall a \in \mathcal{Q}, \Box_{\mathds{1}, idem}(a) \leq \Box_z (a)$.
  \item $\forall a \in \mathcal{Q}, \Box_{z, \mathds{1}, idem} = \Box_{\mathds{1}, idem}(a)$
\end{enumerate}

\end{prop}

\begin{proof}
  Follows from Lemma 3.
\end{proof}

\begin{defin} Interpretation of subexponential signature

  Let $\Sigma = \langle I, \preceq, W, C, E \rangle$ be a subexponential signature, where $|I| = n$ and
  $\Box_{\mathcal{Q}}$ is a category of open modalities on a quantale $\mathcal{Q}$.
  Subexponential interpretation is a contravariant functor $\sigma : I \to \Box_{\mathcal{Q}}$ defined as follows:

  $\sigma(s_i) = \begin{cases}
  \Box_i : \mathcal{Q} \to \mathcal{Q} \text{, s.t.} \forall a \in Q, \Box_i(a) = \{ s \in S_i \: | \: s \leq a\},
  \\ \:\:\:\: \text{if $s_i \notin W \cap C \cap E$} \\
  \Box_i : \mathcal{Q} \to \mathcal{Q} \text{, s.t.} \forall a \in Q, \Box_i(a) = \{ s \in S_i \: | \: s \leq a, s \leq \mathds{1}\},
  \\ \:\:\:\: \text{if $s_i \in W$} \\
  \Box_i : \mathcal{Q} \to \mathcal{Q} \text{, s.t.} \forall a \in Q, \Box_i(a) = \{ s \in S_i \: | \: s \leq a, s \in \mathcal{Z}(\mathcal{Q}) \},
  \\ \:\:\:\: \text{if $s_i \in E$} \\
  \Box_i : \mathcal{Q} \to \mathcal{Q} \text{, s.t.} \forall a \in Q, \Box_i(a) = \{ s \in S_i \: | \: s \leq a, \forall b, b \cdot s \vee s \cdot b \leq s \cdot b \cdot s \},
  \\ \:\:\:\: \text{if $s_i \in E$} \\
  \text{otherwise, if $s_i$ belongs to some intersection of subsets, then we combine the relevant conditions } \\
  \end{cases}$
\end{defin}

\begin{defin} Let $\mathcal{Q}$ be an unital quantale, $f : Tp \to \mathcal{Q}$ a valuation and $\sigma : I \to \Box_{\mathcal{Q}}$ a subexponential interpretation, then
  interpretation is defined inductively:

\begin{center}
$\begin{array}{lll}
& [\![p_i]\!] = f(p_i)&\\
& [\![\mathds{1}]\!] = e & \\
&[\![A \bullet B]\!] = [\![A]\!] \cdot [\![B]\!] & \\
&[\![A \backslash B]\!] = [\![A]\!] \backslash [\![B]\!] & \\
&[\![A / B]\!] = [\![A]\!] / [\![B]\!]& \\
&[\![A \& B]\!] = [\![A]\!] \wedge [\![B]\!]& \\
&[\![A \vee B]\!] = [\![A]\!] \vee [\![B]\!]& \\
&[\![!_{s_i} A]\!] = \sigma(s_i) [\![A]\!]&
\end{array}$
\end{center}
\end{defin}

\begin{defin}
  $\Gamma \models A \Leftrightarrow \forall f, \forall \sigma, [\![\Gamma]\!] \leq [\![A]\!]$
\end{defin}

\begin{theorem}
  $\Gamma \rightarrow A \Rightarrow [\![\Gamma]\!] \leq [\![A]\!]$
\end{theorem}

\begin{proof}
We consider the promotion case, the rest modal cases are immediatly shown.

Let $!_{s_1} A_1, \dots, !_{s_n} A_n \rightarrow A$ and $\forall i, s \preceq s_i$.

Then $\forall a \in Q, \sigma(s_i)(a) \leq \sigma(s)(a)$.

By IH, $\sigma(s_1)[\![A_1]\!] \cdot \dots \cdot \sigma(s_n) [\![A_n]\!] \leq [\![A]\!]$.

Thus, $\sigma(s)(\sigma(s_1)[\![A_1]\!] \cdot \dots \cdot \sigma(s_n) [\![A_n]\!]) \leq \sigma(s)([\![A]\!])$.

By Lemma 5, $\sigma(s_1)[\![A_1]\!] \cdot \dots \cdot \sigma(s_n) [\![A_n]\!] \leq \sigma(s)(\sigma(s_1)[\![A_1]\!] \cdot \dots \cdot \sigma(s_n) [\![A_n]\!])$.

So, $\sigma(s_1)[\![A_1]\!] \cdot \dots \cdot \sigma(s_n) [\![A_n]\!] \leq \sigma(s)([\![A]\!])$.
\end{proof}

\section{Quantale completeness}

\begin{defin}
$ $

  Let $\mathcal{F} \subseteq Fm$, an ideal is a subset $\mathcal{I} \subseteq \mathcal{F}$, such that:

\begin{itemize}
  \item If $B \in \mathcal{I}$ and $A \rightarrow B$, then $A \in \mathcal{I}$;
  \item If $A, B \in \mathcal{I}$, then $A \lor B \in \mathcal{I}$.
\end{itemize}
\end{defin}

\begin{defin}
$ $

  Let $S \subseteq \mathcal{F} \subseteq Fm$,
  then $\bigvee S = \bigcap \{ \mathcal{I} \subseteq \mathcal{F} \: | \: S \subseteq \mathcal{I} \}$
\end{defin}

\begin{prop}
  $\bigvee S$ is an ideal.
\end{prop}

\begin{lemma}
  $A \subseteq Fm$, then $\{ B \: | \: B \rightarrow A \} = \bigvee \{ A \}$.
\end{lemma}

\begin{proof}
$ $

Let $A \in Fm$. Then $\{ B \: | \: B \rightarrow A', A' \in A \} \subseteq \bigvee \{ A \}$,
so far as $\bigvee A$ is an ideal.

On the other hand, $\{ B \: | \: B \rightarrow A \}$ is an ideal, it is easy to see that this set is closed under $\lor$.
So, $\bigvee A \subseteq \{ B \: | \: B \rightarrow A \}$.
\end{proof}

\begin{lemma}
  $\bigvee \{ A \} \subseteq \bigvee \{ B \}$ iff $A \rightarrow B$.
\end{lemma}

\begin{proof}
  Let $\bigvee \{ A \} \subseteq \bigvee \{ B \}$,
  then $\{ C | C \rightarrow A \} \subseteq \{ D \: | \: D \rightarrow B \}$.

Thus, $A \in \{ C | C \rightarrow A \}$,
then $A \in \{ D \: | \: D \rightarrow B \}$, hence $A \rightarrow B$.

On the other hand, let $A \rightarrow B$ and $C \in \bigvee \{ A \}$.

Thus, $C \rightarrow A$, then $C \rightarrow B$ by cut.

\end{proof}

\begin{lemma}
  Let $\mathcal{Q} = \{ \bigvee S \: | \: S \subseteq Fm \}$ and $\bigvee \mathcal{A} \cdot \bigvee \mathcal{B} =
  \bigvee \{ A \bullet B \: | \: A \in \mathcal{A}, B \in \mathcal{B} \}$.
  Then $\langle \mathcal{Q}, \subseteq, \cdot, \bigvee{{\bf 1}}\rangle$ is a quantale.
\end{lemma}

\begin{proof}
  See
\end{proof}

\begin{lemma}
  Let $!_s \in I$ and $A \mathcal{F}_{\Sigma}$, then $\Box_s (\bigvee \{ A \}) = \bigvee \{ !_s B \: | \: !_s B \rightarrow A \}$
  is a quantic conucleus.
\end{lemma}

\begin{proof}
$ $

See Yetter.
\end{proof}

\begin{lemma}
  Let $A \in \mathcal{F}_{\Sigma}$, then $\Box_s \bigvee \{ A \} = \bigvee \{ !_s A \}$, for each $s \in \mathcal{I}$.
\end{lemma}

\begin{proof}
  Let $A \in Fm$ and $s \in \mathcal{I}$.

  Let $!_s B \in \Box_s \bigvee \{ A \}$, then $!_s B \rightarrow A$, then $!_s B \rightarrow !_s A$
  by promotion. So, $!_s B \in \bigvee \{ !_s A \}$.

  Let $C \in \bigvee \{ !_s A \}$, then $C \rightarrow !_s A$, so $!_s C \rightarrow !_s A$ by dereliction, but $!_s A \rightarrow A$, hence
  $!_s C \rightarrow A$ by cut. So, $!_s C \in \Box_s \bigvee \{ A \}$.
\end{proof}

\begin{lemma}
$ $

  Let $i, j \in I$ and $i \preceq j$, then for all $A \in \mathcal{F}_{\Sigma}$, $\Box_j (\bigvee \{ A \}) \subseteq \Box_i (\bigvee \{ A \})$.
\end{lemma}

\begin{proof}
$ $

  Let $i, j \in I$ and $i \preceq j$, then forall $A \in \mathcal{F}_{\Sigma}$, $!_j A \rightarrow !_i A$ by promotion.
  Then $\bigvee \{ !_j A \} \subseteq \bigvee \{ !_i A \}$, so $\Box_j (\bigvee \{ A \}) \subseteq \Box_i (\bigvee \{ A \})$.
\end{proof}

\begin{lemma}
$ $

For all $A \in \mathcal{F}_{\Sigma}$,
  \begin{enumerate}
    \item Let $s \in W$, then $\Box_s \{ A \} \subseteq \{ {\bf 1} \}$;
    \item Let $s \in E$, then $\Box_s (\bigvee \{ A \}) \cdot \bigvee \{ B \} = \bigvee \{ B\} \cdot \Box_s (\bigvee \{ A \})$.
    \item Let $s \in C$, then $(\Box_s \bigvee A \cdot \bigvee B) \cup (\bigvee B \cdot \Box_s \bigvee A) \subseteq \Box_s \bigvee A \cdot \bigvee B \cdot \Box_s \bigvee A$, for all $B \subseteq Fm$.
  \end{enumerate}
\end{lemma}

\begin{proof}
$ $

  \item Follows from $!_s A \rightarrow {\bf 1}$, so $s \in W$;
  \item Follows from $!_s A \bullet B \leftrightarrow B \bullet !_s A$;
  \item Follows from $!_s A \bullet B \rightarrow !_s A \bullet B \bullet !_s A$ and similarly for $B \bullet !_s A$.
\end{proof}

\begin{defin}
$ $

Let $Q$ be a syntactic quantale as proposed above and
$\mathcal{I} = \langle I, \preceq, W, C, E \rangle$ be a subexponential signature.

We define a map $\Box : \mathcal{I} \to Mod_{\mathcal{Q}}$ as follows:

$\Box(i)(\bigvee \{ A \} ) = \{ !_i B \: | !_i B \rightarrow A \}$.
\end{defin}

\begin{lemma} $\Box$ is a subexponential interpretation.
\end{lemma}

\begin{proof}
  Follows from lemmas above.
\end{proof}

\begin{lemma}
$ $

  Let $Q$ be a quantale constructed above and $\Box_1, \dots, \Box_n$ be a family of quantic conuclei on $Q$.
  Then there exist a model $\langle Q, [\![.]\!]\rangle$, such that $[\![A]\!] = \bigvee \{ A \}$, $A \in Fm$.
\end{lemma}

\begin{proof}
$ $

  We define an interpreation as follows:

\begin{enumerate}
  \item $[\![p_i]\!] = \bigvee \{ p_i \}$
  \item $[\![{\bf 1}]\!] = \bigvee \{ {\bf 1} \}$
  \item $[\![A \bullet B]\!] = \bigvee \{ A \bullet B \}$
  \item $[\![A / B]\!] = \bigvee \{ A / B \}$
  \item $[\![B \setminus A]\!] = \bigvee \{ B \setminus A \}$
  \item $[\![A \& B ]\!] = \bigvee \{ A \& B \}$
  \item $[\![A \lor B]\!] = \bigvee \{ A \lor B\}$
  \item $[\![!_s A]\!] = \Box(s) (\bigvee \{ A \}) = \bigvee \{ !_s A \}$.
\end{enumerate}
\end{proof}

\begin{theorem}
  $\Gamma \models A \Rightarrow \Gamma \rightarrow A$.
\end{theorem}

\begin{proof}
  Follows from lemmas above.
\end{proof}

\begin{comment}

\begin{defin} Monoidal comonad
  $ $

  A monoidal comonad on some monoidal category $\mathcal{C}$ is a triple $\langle \mathcal{F}, \epsilon, \delta \rangle$,
  where $\mathcal{F}$ is a monoidal endofunctor and $\epsilon : \mathcal{F} \Rightarrow Id_{\mathcal{C}}$ (counit) and $\epsilon : \mathcal{F} \Rightarrow \mathcal{F}^2$ (comultiplication),
  such that the following diagrams commute:

\begin{minipage}{0.45\textwidth}
\begin{small}
\xymatrix{
\mathcal{F}A \otimes \mathcal{F}B \ar[dd]_{\delta_A \otimes \delta_B} \ar[r]^{\phi_{A,B}} & \mathcal{F}(A \otimes B) \ar[dr]^{\delta_{A \otimes B}} \\
&& \mathcal{F}\mathcal{F}(A \otimes B) \\
\mathcal{F}\mathcal{F}A \otimes \mathcal{F}\mathcal{F}B \ar[r]_{\phi_{\mathcal{F}A, \mathcal{F}B}} & \mathcal{F}(\mathcal{F}A \otimes \mathcal{F}B) \ar[ur]_{\mathcal{F}(\phi_{A,B})}
}
\end{small}
\end{minipage}%
\hfill
\begin{minipage}{0.5\textwidth}
\begin{tabular}{p{\textwidth}}
\xymatrix{
\mathcal{F}A \otimes \mathcal{F}B \ar[rr]^{\phi_{A,B}} \ar[dr]_{\epsilon_A \otimes \epsilon_B} && \mathcal{F}(A \otimes B) \ar[dl]^{\epsilon_{A \otimes B}} \\
& A \otimes B &
}
\end{tabular}
\end{minipage}%

\xymatrix{
&&&&&&& \mathds{1} \ar[r]^{\phi} \ar[d]_{\phi} & \mathcal{F}\mathds{1} \ar[d]^{\delta_{\mathds{1}}} \\
&&&&&&& \mathcal{F}\mathds{1} \ar[r]_{\mathcal{F}(\phi)} & \mathcal{F}\mathcal{F}\mathds{1}
}

\xymatrix{
&&&&&&& \mathds{1} \ar[dr]_{\phi} \ar[rr]^{id_{\mathds{1}}} && \mathds{1}\\
&&&&&&&& \mathcal{F}\mathds{1} \ar[ur]_{\epsilon_{\mathds{1}}} &
}
\end{defin}

\begin{defin} Biclosed monoidal category

  Let $\mathcal{C}$ be a monoidal category. Biclosed monoidal category is a monoidal category with the following additional data:
  \begin{enumerate}
    \item Bifunctors $\underline{\quad} \multimapinv \underline{\quad}, \underline{\quad} \multimap \underline{\quad} : \mathcal{C}^{op} \times \mathcal{C} \to \mathcal{C}$;
    \item Natural isomophism ${\bf curry}_{A,B,C} : Hom (A \otimes B, C) \cong (B, A \multimap C)$;
    \item Natural isomophism ${\bf curry}^{'}_{A,B,C} : Hom (A \otimes B, C) \cong (A, C \multimap B)$;
    \item For each $A, B \in Ob_{\mathcal{C}}$, there are exist arrows $ev_{A,B} : A \otimes (A \Rightarrow B) \rightarrow B$ and $ev_{A,B}^{'} : (B \Leftarrow A) \otimes A \rightarrow B$,
    such that for all $f : A \otimes C \rightarrow B$:
      \begin{enumerate}
        \item $\Lambda_l \circ (id_A \otimes {\bf curry}(f)) = f$;
        \item $\Lambda_r \circ ({\bf curry}^{'}(f) \otimes id_A) = f$
      \end{enumerate}
  \end{enumerate}
\end{defin}

\begin{defin}
  Let $F$ be endofunctor and $A \in Ob\mathcal{C}$, then a coalgebra of $F$ is a tuple $\langle A, \theta \rangle$, where $\theta : A \to F A$.
\end{defin}

Given coalgebras $\langle A, \theta \rangle$ and $\langle A, \psi \rangle$, a homomorphism is a morphism $f : A \to B$, s.t. the diagram below commutes:

\xymatrix{
&&&&&& A \ar[dd]_{f} \ar[rr]^{\theta} && F A \ar[dd]^{F f} \\
\\
&&&&&& B \ar[rr]_{\psi} && F B
}
that is, $F f \circ \theta = \psi \circ f$

\begin{defin} Subexponential model structure

  Let $\Sigma = \langle I, \preceq, W, C, E \rangle$ be a subexponential signature and $\mathcal{C}$ be a biclosed monoidal category,
  then a subexponential model structure is $\langle \mathcal{C}, \{ \mathcal{F}_{s} \}_{s \in I} \rangle$ with the following additional data:

\begin{itemize}
  \item for all $s \in I$, $\mathcal{F}_s$ is a monoidal comonad;
  \item if $s \in W$, then for all $A \in Ob(\mathcal{C})$, there exists a morphism ${w_{A}}_{s} : F_s A \to \mathds{1}$;
  \item if $s \in C$, then for all $A \in Ob(\mathcal{C})$, there exists morphisms
${w_{A}}_{l} : F_s A \otimes A \otimes F_s A \to F_s A \otimes B$ and ${w_{A}}_{r} : F_s A \otimes A \otimes F_s A \to B \otimes F_s A$;
  \item if $s \in E$, then for all $A \in Ob(\mathcal{C})$, there is an isomorpism, ${e_A} : F_s A \otimes B \cong B \otimes F_s A$;
  \item if $s_1 \in W$, $s_2 \in I$ and $s_1 \preceq s_2$, then there is a morphism ${w_{A}}_{s_2} : F_{s_2} A \to \mathds{1}$ for all $A \in Ob(\mathcal{C})$ and ditto for $E$ and $C$;
  \item Let $\bigotimes_{s \in J, i = 0}^{n} F_{s} A$, where $J \subset I$, and $s^{'} \in I$, s.t. $s \succeq s^{'}$ for all $s \in I'$;
  Then there exists morphism a morphism $\theta_{\bigotimes_{s \in J, i = 1}^{n} {F_{s}}_j A_i} : \bigotimes_{s \in J, i = 0}^{n} F_{s} A \to F_{s^{'}} (\bigotimes_{s \in J, i = 0}^{n} F_{s} A)$, such that
  $\langle \bigotimes_{s \in J, i = 1}^{n} {F_{s}}_j A_i, \theta_{\bigotimes_{s \in J, i = 1}^{n} {F_{s}}_j A_i} \rangle$ is a coalgebra on $F_s$.
\end{itemize}
\end{defin}

\begin{defin}
  Let $\langle \mathcal{C}, \{ \mathcal{F}_{s} \}_{s \in I} \rangle$ be a subexponential model structure
  for subexponential signature $\Sigma = \langle I, \preceq, W, C, E \rangle$.
  Let $v : Tp \to Ob(\mathcal{C})$ be a valuation map. Then the interpretation function $[\![.]\!]$ is defined as follows:

$\begin{array}{lll}
(1) &[\![{\bf 1}]\!] = \mathds{1}& \\
(2) &[\![A \backslash B]\!] = [\![A]\!] \multimap [\![B]\!]& \\
(3) &[\![A / B]\!] = [\![A]\!] \multimapinv [\![B]\!]& \\
(4) &[\![A \bullet B]\!] = [\![A]\!] \otimes [\![B]\!]&\\
(5) &[\![!_{s} A]\!] = F_s [\![A]\!]& \\
\end{array}$
\end{defin}

\begin{theorem} The following statements are equivalent:

  \begin{itemize}
    \item $SMLC_{\Sigma} + (cut) \vdash \Gamma \Rightarrow A$
    \item $SMLC_{\Sigma} \vdash \Gamma \Rightarrow A$
    \item $\exists f, f : [\![\Gamma]\!] \rightarrow [\![A]\!]$
  \end{itemize}
\end{theorem}

\begin{proof}
  \begin{itemize}
$ $

    \item (1) $\Rightarrow$ (2): cut elimination.
    \item (2) $\Rightarrow$ (3): Soundness:

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes A \otimes \Delta \rightarrow B$}
  \UnaryInfC{$f \circ (id_{\Gamma} \otimes \delta_s^{A} \otimes id_{\Delta}) : \Gamma \otimes F_s A \otimes \Delta \rightarrow B$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : F_{s_1} A_1 \otimes \dots \otimes F_{s_n} A_n \rightarrow B$}
  \UnaryInfC{$F_s(f) : F_s(F_{s_1} A_1 \otimes \dots \otimes F_{s_n} A_n) \rightarrow F_s B$}
  \UnaryInfC{$F_s (f) \circ \theta_{\bigotimes_{s \in J, i = 1}^{n} {F_{s}}_j A_i} : F_{s_1} A_1 \otimes \dots \otimes F_{s_n} A_n \rightarrow F_s B$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes \Delta \rightarrow A$}
  \UnaryInfC{$f \circ (\rho_{\Gamma} \otimes id_{\Delta}) : (\Gamma \otimes \mathds{1}) \otimes \Delta \rightarrow A$}
  \UnaryInfC{$f \circ (\rho_{\Gamma} \otimes id_{\Delta}) \circ (id_{\Gamma} \otimes {w_{A}}_{s}) \otimes id_{\Delta} : (\Gamma \otimes F_s A) \otimes \Delta \rightarrow A$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes (F_s A \otimes B \otimes F_s A) \otimes \Delta \rightarrow C$}
  \UnaryInfC{$f \circ (id_{\Gamma} \otimes {c_A}_{s}^l \otimes id_{\Delta}) : \Gamma \otimes (F_s A \otimes B) \otimes \Delta \rightarrow C$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes (F_s A \otimes B \otimes F_s A) \otimes \Delta \rightarrow C$}
  \UnaryInfC{$(id_{\Gamma} \otimes {c_A}_{s}^r \otimes id_{\Delta}) \circ f: \Gamma \otimes (B \otimes F_s A) \otimes \Delta \rightarrow C$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes (\Delta \otimes F_s A) \otimes \Theta \rightarrow B$}
  \UnaryInfC{$(id_{\Gamma} \otimes (id_{\Delta} \otimes {e_A}_{s}) \otimes id_{\Theta}) \circ f: \Gamma \otimes (F_s A \otimes \Delta) \otimes \Theta \rightarrow B$}
\end{prooftree}

\begin{prooftree}
  \AxiomC{$f : \Gamma \otimes (F_s A \otimes \Delta) \otimes \Theta \rightarrow B$}
  \UnaryInfC{$(id_{\Gamma} \otimes (id_{\Delta} \otimes {e_A}_{s}^{-1}) \otimes id_{\Theta}) \circ f: \Gamma \otimes (\Delta \otimes F_s A) \otimes \Theta \rightarrow B$}
\end{prooftree}

    \item Completeness:

\begin{defin}
\end{defin}

  \end{itemize}
\end{proof}

\end{comment}

\section{Relational semantics}

\begin{defin}
  $ $

  Let $A$ be a set. Then relational quantale on $A$ is a tuple $\mathcal{Q} = \langle \mathcal{A}, \mathcal{I} \rangle$
  where $\mathcal{A} \subseteq 2^{A \times A}$:

  \begin{itemize}
    \item $\langle \mathcal{A}, \subseteq \rangle$ is a complete semi-lattice;
    \item Multiplication is defined as
      $R \circ S = \{ \langle a, c \rangle \: | \: \exists b \in A, \langle a, b \rangle \in R \text{ and } \langle b, c \rangle \in S\}$
    \item $\langle \mathcal{A}, \circ, \mathcal{I} \rangle$ is a monoid;
    \item For each indexing set $J$, $R \circ \bigvee_{i \in I} S_i = \bigvee_{i \in I} (R \circ S_i)$ and
      $\bigvee_{i \in I} R_i \circ S = \bigvee_{i \in I}(R_i \circ S)$.
  \end{itemize}
\end{defin}

\begin{theorem}
  $ $

  Let $\mathcal{Q} = \langle A, \leq, \cdot, \bigvee \rangle$ be a unital quantale and $\mathcal{S}$ is a subquantale of $\mathcal{Q}$.

  Then $\langle \mathcal{Q}, \Box_{\mathcal{S}} \rangle$ is isomorphic to some relational quantale of $A$
  wit some quantic conucleus $\hat{\Box}$.
\end{theorem}

\begin{proof}
$ $

  Consider a relational quantale proposed by Brown and Gurr.

  This quantale is 4-tuple $\theta(\mathcal{Q}) = \langle \mathcal{R}, \subseteq, \circ, \bigvee \rangle$ defined as follows:
  \begin{enumerate}
    \item $\theta(a) = \{ \langle b, c \rangle \: | \: b \leq a \cdot c \}$;
    \item $\theta(a \cdot b) = \theta(a) \circ \theta(b)$;
    \item $\theta(\bigvee \limits_{i \in I} a_i) = \bigvee \limits_{i \in I} \theta(a_i)$;
    \item $\theta(\varepsilon) = \{ \langle b, c \rangle \: | \: b \cdot \varepsilon \leq c \} = \{ \langle b, c \rangle \: | \: b \leq c \}$
  \end{enumerate}

  Let $\mathcal{S} \subseteq \mathcal{Q}$, so $\Box_{\mathcal{S}} a := \bigvee \{ s \: | \: s \in S, s \leq a \}$ is quantic conucleus.

  So, $\theta(S) \subseteq \theta(\mathcal{Q})$ is a subquantale of $\theta(\mathcal{Q})$.

  Let us define $\hat{\Box} \theta(a) := \bigvee \{ \theta(s) \: | \: \theta(s) \in \theta(S), \theta(s) \subseteq \theta(a) \}$, so

  $\begin{array}{lll}
  &\theta(\Box_{\mathcal{S}} a) = \{ \langle p, q \rangle \: | \: p \leq \Box_{\mathcal{S}} a \cdot q \} = &\\
  &\{ \langle p, q \rangle \: | \: p \leq \bigvee \{ s \: | \: s \in \mathcal{S}, s \leq a \} \cdot q \} = &\\
  &\:\:\:\: \text{Homomorphism}& \\
  &\theta(\bigvee_{s \in S, s \leq a} s) = & \\
  &\:\:\:\: \text{Homomorphism preserves sups}& \\
  &\bigvee_{s \in S, s \leq a} \theta(s) = & \\
  &\:\:\:\: \text{Unfolding}& \\
  &\bigvee \{ \theta(s) \: | \: s \in S, s \leq a \} = & \\
  &\:\:\:\: \text{Unfolding}& \\
  &\bigvee \{ \theta(s) \: | \: \theta(s) \in \theta(S), \theta(s) \subseteq \theta(a) \} = \hat{\Box} \theta(a)& \\
  \end{array}$

So, $\hat{\Box} \theta(a) = \theta(\Box_{\mathcal{S}} a)$.

\end{proof}

\begin{theorem}
  $\Gamma \models A$, then ${L^{*}_{\bf 1} \land \lor}_{\bf S4} \vdash \Gamma \rightarrow A$
\end{theorem}

\end{document}
